<!DOCTYPE html>
<html>
<head>
    <title>Image Captioning</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
        /* Custom Cursor */
        .cursor {
  position: fixed;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: rgba(120, 134, 146, 0.5);
  box-shadow: 0 0 10px rgba(120, 134, 146, 0.8);
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: 9999;
  mix-blend-mode: screen;
  transition: transform 0.15s ease, background 0.2s ease, box-shadow 0.2s ease;
}

.cursor-inner {
  position: fixed;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: white;
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: 9999;
  transition: width 0.2s ease, height 0.2s ease;
}

.cursor.hover {
  transform: translate(-50%, -50%) scale(1.5);
  background: rgba(74, 144, 226, 0.5);
  box-shadow: 0 0 15px rgba(74, 144, 226, 0.8);
}

.cursor.click {
  transform: translate(-50%, -50%) scale(0.8);
  background: rgba(231, 76, 60, 0.5);
  box-shadow: 0 0 20px rgba(231, 76, 60, 0.8);
}

.cursor.hover .cursor-inner,
.cursor.click .cursor-inner {
  width: 4px;
  height: 4px;
}

/* Make sure cursor doesn't interfere with text selection */
* {
  cursor: none !important;
}

/* Loading Overlay */
.page-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: #000000;
  z-index: 1000;
  animation: fadeOut 0.9s ease-out forwards;
  display: flex;
  justify-content: center;
  align-items: center;
}

@keyframes fadeOut {
  0% { opacity: 1; }
  70% { opacity: 0.5; }
  100% { opacity: 0; visibility: hidden; }
}

/* Body Animation */
body {
  margin: 0;
  padding: 0;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: #000000;
  color: white;
  opacity: 0;
  animation: fadeInBody 0.5s ease-out forwards;
  animation-delay: 0.5s;
  overflow-x: hidden;
}

body::before {
  content: '';
  position: fixed;
  top: 30%;
  left: -10%;
  width: 40%;
  height: 40%;
  background: radial-gradient(circle, rgba(100, 181, 255, 0.12) 0%, rgba(100, 181, 255, 0) 70%);
  z-index: -1;
  pointer-events: none;
  animation: ambientGlow 20s infinite alternate ease-in-out;
}

body::after {
  content: '';
  position: fixed;
  bottom: 10%;
  right: -15%;
  width: 50%;
  height: 50%;
  background: radial-gradient(circle, rgba(100, 181, 255, 0.08) 0%, rgba(100, 181, 255, 0) 70%);
  z-index: -1;
  pointer-events: none;
  animation: ambientGlow 15s infinite alternate-reverse ease-in-out;
}

@keyframes fadeInBody {
  to { opacity: 1; }
}

nav {
  position: fixed;
  top: 10px;
  left: 50%;
  transform: translateX(-50%);
  width: calc(100% - 40px);
  max-width: 1000px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 20px;
  background: rgba(0, 0, 0, 0.1);
  box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
  backdrop-filter: blur(12px);
  border-radius: 15px;
  border: 1px solid rgba(255, 255, 255, 0.18);
  z-index: 10;
  color: white;
  opacity: 0;
  animation: slideDownFadeIn 0.8s ease-out forwards;
  animation-delay: 1.0s;
}

/* Updated navbar styles */
nav {
  box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37), 0 0 15px rgba(100, 181, 255, 0.3);
  transition: box-shadow 0.3s ease;
}

nav:hover {
  box-shadow: 0 0 25px rgba(100, 181, 255, 0.6), 
              0 8px 32px rgba(31, 38, 135, 0.5);
}

nav .logo {
  text-shadow: 0 0 8px var(--glow-color);
  transition: text-shadow 0.3s ease;
}

nav .logo:hover {
  text-shadow: 0 0 20px var(--glow-color);
}

@keyframes slideDownFadeIn {
  0% {
    opacity: 0;
    transform: translate(-50%, -20px);
  }
  100% {
    opacity: 1;
    transform: translate(-50%, 0);
  }
}

nav .logo {
  font-size: 1.2rem;
  font-weight: bold;
  white-space: nowrap;
  text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
  transition: text-shadow 0.3s ease;
}

nav .logo:hover {
  text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
}

/* Navigation links - from trycaption.html */
nav ul {
  list-style: none;
  display: flex;
  gap: 15px;
  margin: 0;
  padding: 0;
}

nav ul li {
  cursor: pointer;
  transition: color 0.3s;
  font-size: 0.9rem;
}

nav ul li a {
  color: inherit;
  text-decoration: none;
  display: block;
  padding: 5px 10px;
  transition: all 0.3s ease;
  border-radius: 8px;
}

 nav ul li:hover a {
  color: #fff;
  background: rgba(74, 144, 226, 0.18);
  box-shadow:
    0 0 24px 8px rgba(74, 144, 226, 0.7),
    0 0 40px 12px rgba(120, 134, 146, 0.25);
  backdrop-filter: blur(8px);
  text-shadow:
    0 0 12px #4a90e2,
    0 0 32px #a4d4ff;
  transform: scale(1.08);
  transition: 
    background 0.3s,
    box-shadow 0.3s,
    text-shadow 0.3s,
    transform 0.2s;
}

/* Modern Hamburger Menu - from trycaption.html */
.hamburger {
  display: none;
  cursor: pointer;
  width: 24px;
  height: 21px;
  position: relative;
  z-index: 11;
  background: transparent;
  border: none;
}

.hamburger span {
  display: block;
  position: absolute;
  height: 3px;
  width: 100%;
  background: white;
  border-radius: 3px;
  opacity: 1;
  left: 0;
  transform: rotate(0deg);
  transition: .25s ease-in-out;
  box-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
}

.hamburger:hover span {
  box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
}

.hamburger span:nth-child(1) {
  top: 0;
}

.hamburger span:nth-child(2),
.hamburger span:nth-child(3) {
  top: 9px;
}

.hamburger span:nth-child(4) {
  top: 18px;
}

.hamburger.active span:nth-child(1) {
  top: 9px;
  width: 0%;
  left: 50%;
}

.hamburger.active span:nth-child(2) {
  transform: rotate(45deg);
}

.hamburger.active span:nth-child(3) {
  transform: rotate(-45deg);
}

.hamburger.active span:nth-child(4) {
  top: 9px;
  width: 0%;
  left: 50%;
}

/* Mobile Menu Styles - from trycaption.html */
@media (max-width: 768px) {
  .hamburger {
    display: block;
  }

  nav ul {
    position: fixed;
    top: 0;
    right: -100%;
    width: 70%;
    height: 100vh;
    background: rgba(20, 20, 20, 0.95);
    backdrop-filter: blur(15px);
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 30px;
    transition: right 0.5s ease;
    z-index: 10;
    padding: 20px;
    border-left: 1px solid rgba(255, 255, 255, 0.1);
    margin: 0;
    box-shadow: -5px 0 15px rgba(120, 134, 146, 0.3);
  }

  nav ul.active {
    right: 0;
    box-shadow: -5px 0 25px rgba(120, 134, 146, 0.5);
  }

  nav ul li {
    width: 100%;
    text-align: center;
  }

  nav ul li a {
    padding: 15px;
    font-size: 1.1rem;
    width: 100%;
  }

  nav ul li:hover a {
    background: rgba(60, 68, 75, 0.479);
    box-shadow: 0 0 15px rgba(120, 134, 146, 0.5);
  }

  nav .logo {
    font-size: 1rem;
  }
}

/* Page Content */
.content { 
  padding: 100px 40px 40px;
  max-width: 1400px;
  margin: 0 auto;
  opacity: 0;
  animation: fadeInUp 0.8s ease-out forwards;
  animation-delay: 1.8s;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

h1 {
    font-size: 2.5rem;
    margin-bottom: 20px;
    text-shadow: 0 0 10px rgba(120, 134, 146, 0.5);
    transition: all 0.3s ease;
    text-align: center; /* Add this line */
        }
        .caption-box h2 {
    text-align: center; /* Add this line */
    margin-bottom: 20px;
    font-size: 2rem;
    text-shadow: 0 0 10px rgba(120, 134, 146, 0.5);
    transition: all 0.3s ease;
}


        h1:hover {
          text-shadow: 0 0 20px rgba(120, 134, 146, 0.8);
        }

        /* New Layout Styles */
        .split-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }

        .left-panel {
            padding: 20px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 15px;
            box-shadow: 0 0 15px rgba(120, 134, 146, 0.3);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            transition: all 0.3s ease;
        }

        .right-panel {
            padding: 20px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 15px;
            box-shadow: 0 0 15px rgba(120, 134, 146, 0.3);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            transition: all 0.3s ease;
        }

        .image-preview {
            width: 100%;
            height: 400px;
            margin: 0 auto 20px;
        }

        .caption-box {
            width: 100%;
            margin: 0 0 20px;
            max-width: none;
        }

        #caption-list {
            max-width: none;
            margin: 0;
        }

        /* Responsive Design */
        @media (max-width: 968px) {
            .split-container {
                grid-template-columns: 1fr;
            }
            
            .image-preview {
                height: 300px;
            }
            
            .content {
                padding: 100px 20px 40px;
            }
        }

        /* Image Upload and Preview Styles */
        .upload-container {
          max-width: 600px;
          margin: 0 auto;
          padding: 20px;
          background: rgba(0, 0, 0, 0.1);
          border-radius: 15px;
          box-shadow: 0 0 15px rgba(120, 134, 146, 0.3), 
                      0 8px 32px rgba(31, 38, 135, 0.37);
          backdrop-filter: blur(12px);
          border: 1px solid rgba(255, 255, 255, 0.18);
          transition: all 0.3s ease;
        }
        
        .upload-container:hover {
          box-shadow: 0 0 25px rgba(120, 134, 146, 0.6), 
                      0 8px 32px rgba(31, 38, 135, 0.5);
          transform: translateY(-5px);
        }

        .image-preview {
          width: 100%;
          max-width: 500px;
          height: 300px;
          margin: 20px auto;
          border: 2px dashed rgba(255, 255, 255, 0.3);
          border-radius: 8px;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          transition: all 0.3s ease;
          box-shadow: inset 0 0 10px rgba(120, 134, 146, 0.2);
        }
        
        .image-preview:hover {
          border-color: rgba(255, 255, 255, 0.5);
          box-shadow: inset 0 0 15px rgba(120, 134, 146, 0.4);
        }

        .image-preview img {
          max-width: 100%;
          max-height: 100%;
          object-fit: contain;
        }

        /* Buttons - merged from both files */
        .upload-btn {
          background: #4a90e2;
          color: white;
          padding: 10px 20px;
          border: none;
          border-radius: 5px;
          cursor: pointer;
          font-size: 1rem;
          transition: all 0.3s ease;
          box-shadow: 0 0 10px rgba(74, 144, 226, 0.3);
        }

        .upload-btn:hover {
          background: #357abd;
          transform: translateY(-2px);
          box-shadow: 0 0 15px rgba(74, 144, 226, 0.6);
        }

        .reset-btn {
          background: #e74c3c;
          color: white;
          padding: 10px 20px;
          border: none;
          border-radius: 5px;
          cursor: pointer;
          font-size: 1rem;
          transition: all 0.3s ease;
          margin-left: 10px;
          box-shadow: 0 0 10px rgba(231, 76, 60, 0.3);
        }

        .reset-btn:hover {
          background: #c0392b;
          transform: translateY(-2px);
          box-shadow: 0 0 15px rgba(231, 76, 60, 0.6);
        }

        /* Caption box - merged styles */
        .caption-box {
          width: 100%;
          max-width: 500px;
          margin: 20px auto;
          padding: 15px;
          background: rgba(255, 255, 255, 0.05);
          border: 1px solid rgba(255, 255, 255, 0.1);
          border-radius: 8px;
          color: white;
          font-size: 1rem;
          resize: vertical;
          min-height: 100px;
          transition: all 0.3s ease;
          box-shadow: inset 0 0 10px rgba(120, 134, 146, 0.2);
          box-sizing: border-box;
        }

        @media (max-width: 768px) {
          .caption-box {
            max-width: 90%;
            font-size: 0.9rem;
            min-height: 80px;
          }
        }

        .caption-box:focus {
          outline: none;
          border-color: #4a90e2;
          box-shadow: inset 0 0 15px rgba(74, 144, 226, 0.3),
                      0 0 10px rgba(74, 144, 226, 0.2);
        }

        .button-container {
          display: flex;
          justify-content: center;
          gap: 10px;
        }

        /* Loader Styles */
        .loader-container {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.8);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 1000;
          opacity: 0;
          visibility: hidden;
          transition: opacity 0.5s ease, visibility 0.5s ease;
          backdrop-filter: blur(5px);
        }

        .loader-container.active {
          opacity: 1;
          visibility: visible;
        }

        /* Terminal Loader Animation */
        @keyframes blinkCursor {
          50% {
            border-right-color: transparent;
          }
        }

        @keyframes typeAndDelete {
          0%,
          10% {
            width: 0;
          }
          45%,
          55% {
            width: 6.2em;
          }
          90%,
          100% {
            width: 0;
          }
        }

        .terminal-loader {
          border: 0.1em solid #333;
          background-color: #1a1a1a;
          color: #0f0;
          font-family: "Courier New", Courier, monospace;
          font-size: 1em;
          padding: 1.5em 1em;
          width: 12em;
          box-shadow: 0 0 20px rgba(0, 255, 0, 0.4);
          border-radius: 4px;
          position: relative;
          overflow: hidden;
          box-sizing: border-box;
          transition: all 0.3s ease;
        }
        
        .terminal-loader:hover {
          box-shadow: 0 0 30px rgba(0, 255, 0, 0.7);
        }

        .terminal-header {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 1.5em;
          background-color: #333;
          border-top-left-radius: 4px;
          border-top-right-radius: 4px;
          padding: 0 0.4em;
          box-sizing: border-box;
        }

        .terminal-controls {
          float: right;
        }

        .control {
          display: inline-block;
          width: 0.6em;
          height: 0.6em;
          margin-left: 0.4em;
          border-radius: 50%;
          background-color: #777;
          transition: all 0.3s ease;
        }
        
        .control:hover {
          transform: scale(1.2);
        }

        .control.close {
          background-color: #e33;
          box-shadow: 0 0 5px rgba(238, 51, 51, 0.5);
        }
        
        .control.close:hover {
          box-shadow: 0 0 10px rgba(238, 51, 51, 0.8);
        }

        .control.minimize {
          background-color: #ee0;
          box-shadow: 0 0 5px rgba(238, 238, 0, 0.5);
        }
        
        .control.minimize:hover {
          box-shadow: 0 0 10px rgba(238, 238, 0, 0.8);
        }

        .control.maximize {
          background-color: #0b0;
          box-shadow: 0 0 5px rgba(0, 187, 0, 0.5);
        }
        
        .control.maximize:hover {
          box-shadow: 0 0 10px rgba(0, 187, 0, 0.8);
        }

        .terminal-title {
          float: left;
          line-height: 1.5em;
          color: #eee;
          text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }

        .text {
          display: inline-block;
          white-space: nowrap;
          overflow: hidden;
          border-right: 0.2em solid green;
          animation:
            typeAndDelete 4s steps(11) infinite,
            blinkCursor 0.5s step-end infinite alternate;
          margin-top: 1.5em;
          text-shadow: 0 0 10px rgba(0, 255, 0, 0.7);
        }

        /* Caption list styles */
        #caption-list {
          list-style: none;
          padding: 0;
          margin: 20px auto;
          max-width: 500px;
        }

        #caption-list li {
          background: rgba(255, 255, 255, 0.05);
          border: 1px solid rgba(255, 255, 255, 0.1);
          border-radius: 8px;
          padding: 15px;
          margin-bottom: 10px;
          transition: all 0.3s ease;
          box-shadow: inset 0 0 10px rgba(120, 134, 146, 0.2);
        }

        #caption-list li:hover {
          background: rgba(255, 255, 255, 0.1);
          border-color: #4a90e2;
          box-shadow: inset 0 0 15px rgba(74, 144, 226, 0.3),
                      0 0 10px rgba(74, 144, 226, 0.2);
        }

        /* File input styling */
        .file-input-container {
          position: relative;
          margin: 20px auto;
          text-align: center;
        }

        .file-input-label {
          display: inline-block;
          padding: 10px 20px;
          background: #4a90e2;
          color: white;
          border-radius: 5px;
          cursor: pointer;
          transition: all 0.3s ease;
          box-shadow: 0 0 10px rgba(74, 144, 226, 0.3);
        }

        .file-input-label:hover {
          background: #357abd;
          transform: translateY(-2px);
          box-shadow: 0 0 15px rgba(74, 144, 226, 0.6);
        }

        #imageUpload {
          position: absolute;
          left: 0;
          top: 0;
          opacity: 0;
          width: 100%;
          height: 100%;
          cursor: pointer;
        }

        @keyframes ambientGlow {
  0% {
    transform: translateX(0) translateY(0) scale(1);
    opacity: 0.5;
  }
  100% {
    transform: translateX(5%) translateY(5%) scale(1.2);
    opacity: 0.8;
  }
}

/* Hide scrollbar but maintain scroll functionality */
* {
    /* For Chrome, Safari, and newer versions of Edge */
    scrollbar-width: none; /* For Firefox */
    -ms-overflow-style: none; /* For Internet Explorer and Edge */
}

/* For Chrome, Safari, and newer versions of Edge */
*::-webkit-scrollbar {
    display: none;
}

/* Ensure content still scrolls smoothly */
html {
    scroll-behavior: smooth;
}

/* Maintain overflow scroll functionality */
body {
    overflow-y: scroll;
    scrollbar-width: none;
    -ms-overflow-style: none;
}

/* Hide scrollbar in webkit browsers */
body::-webkit-scrollbar {
    width: 0;
    height: 0;
}

.examples-section {
    margin-top: 40px;
    text-align: center;
    padding: 20px;
    background: rgba(0, 0, 0, 0.1);
    border-radius: 15px;
    backdrop-filter: blur(12px);
}

.example-images {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 20px;
    flex-wrap: wrap;
}

.example-card {
    background: rgba(255, 255, 255, 0.1);
    padding: 10px;
    border-radius: 10px;
    transition: transform 0.3s ease;
}

.example-card:hover {
    transform: scale(1.05);
    cursor: pointer;
}

.example-img {
    width: 200px;
    height: 200px;
    object-fit: cover;
    border-radius: 8px;
}

.example-card p {
    margin-top: 10px;
    font-size: 0.9rem;
    color: #fff;
}
    </style>
</head>
<body>
  <!-- Custom Cursor -->
  <div class="cursor"></div>
  <div class="cursor-inner"></div>

  <!-- Loading Overlay -->
  <div class="page-overlay"></div>

  <!-- Navbar -->
  <nav>
    <div class="logo">𝙄𝙈𝘼𝙶𝙀 𝘾𝘼𝙋𝙏𝙄𝙊𝙉𝙄𝙉𝐆</div>
    <button class="hamburger" id="hamburgerBtn">
      <span></span><span></span><span></span><span></span>
    </button>
  <ul id="navMenu">
 <li><a href="{{ url_for('home') }}">𝐇𝐎𝐌𝐄</a></li>
    <li><a href="{{ url_for('about') }}">𝐀𝐁𝐎𝐔𝐓</a></li>
    <li><a href="{{ url_for('contact') }}">𝐂𝐎𝐍𝐓𝐀𝐂𝐓</a></li>
</ul>
  </nav>

  <!-- Loader -->
  <div class="loader-container" id="loader">
    <div class="terminal-loader">
      <div class="terminal-header">
        <div class="terminal-title">Status</div>
        <div class="terminal-controls">
          <div class="control close"></div>
          <div class="control minimize"></div>
          <div class="control maximize"></div>
        </div>
      </div>
      <div class="text">Loading Caption...</div>
    </div>
  </div>

  <!-- Page Content -->
  <div class="content">
    <h1>𝐔𝐩𝐥𝐨𝐚𝐝 𝐈𝐦𝐚𝐠𝐞 𝐟𝐨𝐫 𝐂𝐚𝐩𝐭𝐢𝐨𝐧𝐢𝐧𝐠</h1>
    
    <div class="split-container">
        <!-- Left Panel - Image Upload and Preview -->
        <div class="left-panel">
            <div class="file-input-container">
                <label class="file-input-label" for="imageUpload">Choose Image</label>
                <input type="file" id="imageUpload" accept="image/*">
            </div>
            
            <div class="image-preview" id="imagePreview">
                <p>No image selected</p>
            </div>
            
            <div class="button-container">
                <button class="upload-btn" onclick="generateCaption()">Generate Caption</button>
                <button class="reset-btn" onclick="resetAll()">Reset</button>
            </div>
        </div>

        <!-- Right Panel - Captions -->
        <div class="right-panel">
            <div class="caption-box" id="caption-results">
                <h2>Generated Captions</h2>
                <div id="loading" style="display:none;">Generating captions...</div>
                <ul id="caption-list"></ul>
            </div>
        </div>
    </div>

    <!-- Add this after the split-container div -->
<div class="examples-section">
    <h2>Example Images</h2>
    <div class="example-images">
        <div class="example-card">
            <img src="{{ url_for('static', filename='images/image_007.png') }}" 
                 alt="RSICD Example" 
                 class="example-img"
                 onclick="useExampleImage(this.src, 'RSICD IMAGE')">
            <p>RSICD IMAGE</p>
        </div>
        <div class="example-card">
            <img src="{{ url_for('static', filename='images/spidey.webp') }}" 
                 alt="Random Example" 
                 class="example-img"
                 onclick="useExampleImage(this.src, 'Random Image')">
            <p>RANDOM IMAGE(GENERIC IMG)</p>
        </div>
    </div>
</div>
  </div>

  <script>
    // Custom cursor
    const cursor = document.querySelector('.cursor');
    const cursorInner = document.querySelector('.cursor-inner');
    const hoverElements = document.querySelectorAll('a, button, input, textarea, [hover-effect]');
    
    document.addEventListener('mousemove', (e) => {
      cursor.style.left = e.clientX + 'px';
      cursor.style.top = e.clientY + 'px';
      cursorInner.style.left = e.clientX + 'px';
      cursorInner.style.top = e.clientY + 'px';
    });
    
    // Hover effects
    hoverElements.forEach(el => {
      el.addEventListener('mouseenter', () => {
        cursor.classList.add('hover');
      });
      el.addEventListener('mouseleave', () => {
        cursor.classList.remove('hover');
      });
    });
    
    // Click effect
    document.addEventListener('mousedown', () => {
      cursor.classList.add('click');
    });
    
    document.addEventListener('mouseup', () => {
      cursor.classList.remove('click');
    });

    // Hamburger menu functionality
    const hamburgerBtn = document.getElementById('hamburgerBtn');
    const navMenu = document.getElementById('navMenu');
    
    hamburgerBtn.addEventListener('click', () => {
      hamburgerBtn.classList.toggle('active');
      navMenu.classList.toggle('active');
    });

    const upload = document.getElementById("imageUpload");
    const preview = document.getElementById("imagePreview");
    const results = document.getElementById("caption-list");
    const loading = document.getElementById("loading");
    const loader = document.getElementById("loader");

    upload.addEventListener("change", function() {
        const file = upload.files[0];
        if (!file) return;

        // Show image preview
        const reader = new FileReader();
        reader.onload = function(e) {
            preview.innerHTML = '';
            const img = document.createElement('img');
            img.src = e.target.result;
            img.style.maxWidth = '100%';
            img.style.maxHeight = '100%';
            img.style.objectFit = 'contain';
            preview.appendChild(img);
        };
        reader.readAsDataURL(file);

        // Prepare form data
        const formData = new FormData();
        formData.append("image", file);

        // Clear previous results and show loading
        results.innerHTML = "";
        loading.style.display = "block";
        loader.classList.add('active');

        // Send request
        fetch("/caption", {
            method: "POST",
            body: formData
        })
        .then(res => res.json())
        .then(data => {  // Added missing parentheses and fixed syntax
            loading.style.display = "none";
            loader.classList.remove('active');
            data.captions.forEach(item => {
                const li = document.createElement("li");
                li.textContent = `${item.model}: ${item.caption}`;
                results.appendChild(li);
            });
        })
        .catch(err => {
            loading.style.display = "none";
            loader.classList.remove('active');
            const li = document.createElement("li");
            li.textContent = "Error generating caption: " + err;
            results.appendChild(li);
        });
    });

    function generateCaption() {
      const imageInput = document.getElementById('imageUpload');
      if (imageInput.files.length > 0) {
        loader.classList.add('active');
        setTimeout(() => {
          loader.classList.remove('active');
          setTimeout(() => {
            uploadImage();
          }, 500);
        }, 3000);
      } else {
        alert('Please upload an image first.');
      }
    }

    function resetAll() {
      upload.value = '';
      preview.innerHTML = '<p>No image selected</p>';
      results.innerHTML = '';
      loading.style.display = 'none';
    }

    async function generateCaptionFromFormData(formData) {
    try {
        // Show loading indicators
        loading.style.display = "block";
        loader.classList.add('active');
        results.innerHTML = "";

        // Send request
        const response = await fetch("/caption", {
            method: "POST",
            body: formData
        });
        
        const data = await response.json();
        
        // Hide loading indicators
        loading.style.display = "none";
        loader.classList.remove('active');

        // Display results
        if (data.captions) {
            data.captions.forEach(item => {
                const li = document.createElement("li");
                li.textContent = `${item.model}: ${item.caption}`;
                results.appendChild(li);
            });
        } else if (data.error) {
            const li = document.createElement("li");
            li.textContent = "Error: " + data.error;
            results.appendChild(li);
        }
    } catch (error) {
        // Handle errors
        loading.style.display = "none";
        loader.classList.remove('active');
        const li = document.createElement("li");
        li.textContent = "Error generating caption: " + error;
        results.appendChild(li);
    }
}

    async function useExampleImage(src, label) {
    // Clear previous results
    results.innerHTML = '';
    
    try {
        // Show loading animation immediately
        loader.classList.add('active');
        
        // Fetch the image file
        const response = await fetch(src);
        const blob = await response.blob();
        
        // Create a File object from the blob
        const file = new File([blob], label + '.png', { type: 'image/png' });
        
        // Display preview
        const reader = new FileReader();
        reader.onload = function(e) {
            preview.innerHTML = `<img src="${e.target.result}" style="max-width: 100%; max-height: 400px;">`;
        };
        reader.readAsDataURL(file);
        
        // Create FormData and trigger caption generation
        const formData = new FormData();
        formData.append('image', file);
        await generateCaptionFromFormData(formData);
        
    } catch (error) {
        console.error('Error loading example image:', error);
        loader.classList.remove('active');
        results.innerHTML = `<li>Error: ${error.message}</li>`;
    }
}
  </script>
</body>
</html>